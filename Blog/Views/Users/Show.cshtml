@model Blog.Models.UserViewModel

@{
    ViewBag.Title = "Show";
}
<div id="profile-header">

    <div class="user-avatar">
        @if (!ViewBag.IsCurrentUser)
        {
                if (ViewBag.isFollowing)
                {
                    <button type="button" class="btn btn-danger center-block" onclick="location.href = '@Url.Action("Unfollow", "Users", new {name = Model.Name})'"><span aria-label="unfollow" class="glyphicon glyphicon-remove"></span></button>
                }
                else
                {
                    <button type="button" class="btn btn-success center-block" onclick="location.href = '@Url.Action("Follow", "Users", new {name = Model.Name})'"><span class="glyphicon glyphicon-plus"></span></button>
                }
        }
        <img class="img-circle pull-left" width="128" height="128" src="@Url.Action("GetUserProfileImage", "Users", new {id = Model.Id})" />
    </div>

</div>

<div class="profile-body container-fluid">
    <div class="posts-box">
        <ul class="nav nav-tabs nav-justified">
            <li role="presentation" class="active"><a data-toggle="tab" href="#posts">Posts</a></li>
            <li role="presentation"><a data-toggle="tab" href="#likes">Likes</a></li>
        </ul>
    </div>

    <div class="tab-content">
        <div id="posts" class="tab-pane fade in active">
            @Html.Action("GetUserPosts", "Posts", new { name = Model.Name })
        </div>
        <div id="likes" class="tab-pane fade">
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        if (location.hash !== '') $('a[href="' + location.hash + '"]').tab('show');
        return $('a[data-toggle="tab"]').on('shown', function (e) {
            return location.hash = $(e.target).attr('href').substr(1);
        });
    });

    $(function() {
        $("#profile-header")
            .css("background-image", "url(@Url.Action("GetUserHeaderImage", "Users", new {id = Model.Id}))");

        @if (ViewBag.isFollowing)
        {
            @:$(".user-avatar img").css("border", "3px solid green");
        }
        else
        {
            @:$(".user-avatar img").css("border", "3px solid red");
        }
    });
</script>